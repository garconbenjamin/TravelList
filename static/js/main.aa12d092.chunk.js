(this.webpackJsonptravellist=this.webpackJsonptravellist||[]).push([[0],{17:function(e,a,t){e.exports=t(35)},33:function(e,a,t){},35:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),r=t(6),i=t.n(r),l=t(7),o=t.n(l),s=t(2),u=t(3),m=t(8),d=Object(n.createContext)(),v=d.Provider,p=(d.Consumer,d),E=(t(12),t(13),t(14),t(15),t(38),t(5)),f=t(16),g=t(11),b=function(e){var a=e.data,t=(e.index,a.id),n=a.name,r=a.name_zh,i=a.distric,l=a.official_site,o=a.category,s=a.images;return c.a.createElement(g.a,{to:"/".concat(t)},c.a.createElement("div",{className:"card-wrapper"},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-img",style:s[0]?{backgroundImage:"url(".concat(s[0].src,")")}:null},s[0]?null:c.a.createElement("span",{className:"text-holder"},"No Image")),c.a.createElement("div",{className:"card-text"},c.a.createElement("div",{className:"title"}," ",n||r),c.a.createElement("ul",null,i?c.a.createElement("li",null,c.a.createElement(E.b,null),c.a.createElement("span",null,i)):null,c.a.createElement("li",null,o?o.map((function(e,a){return c.a.createElement("span",{className:"hashtag",style:{filter:"hue-rotate(".concat(5*+e.id,"deg)")},key:a},"#",e.name)})):null)),l?c.a.createElement("a",{target:"_blank",className:"official-site",href:l,onClick:function(e){e.stopPropagation()}},c.a.createElement(f.a,null),"\u5b98\u65b9\u7db2\u7ad9\b"):null))))},h=function(){var e=Object(n.useContext)(p),a=e.content,t=e.dispatch,r=e.isLoading;return c.a.createElement("div",{className:"travel-list"},c.a.createElement("div",{className:"card-list"},a.map((function(e,a){return c.a.createElement(b,{data:e,index:a,key:a})})),r?Object(u.a)(Array(4)).map((function(e,a){return c.a.createElement("div",{className:"card-wrapper",key:a},c.a.createElement("div",{className:"card skeleton"},"Loading..."))})):null),a.length?c.a.createElement("div",{className:"button-wrapper"},c.a.createElement("button",{className:r?"loading":"",onClick:function(){t({type:"NEXT_PAGE"})}},c.a.createElement("span",null,"Load more"))):null)},w={currentPage:1,totalPage:0,likedSpot:[],categories:[{id:11,name:"\u990a\u751f\u6eab\u6cc9",active:!1},{id:12,name:"\u55ae\u8eca\u904a\u8e64",active:!1},{id:13,name:"\u6b77\u53f2\u5efa\u7bc9",active:!1},{id:14,name:"\u5b97\u6559\u4fe1\u4ef0",active:!1},{id:15,name:"\u85dd\u6587\u9928\u6240",active:!1},{id:18,name:"\u516c\u5171\u85dd\u8853",active:!1},{id:16,name:"\u6236\u5916\u8e0f\u9752",active:!1},{id:17,name:"\u85cd\u8272\u6c34\u8def",active:!1},{id:19,name:"\u89aa\u5b50\u5171\u904a",active:!1},{id:20,name:"\u5317\u5317\u57fa\u666f\u9ede",active:!1},{id:23,name:"\u591c\u5e02\u5546\u5708",active:!1},{id:24,name:"\u4e3b\u984c\u5546\u8857",active:!1},{id:25,name:"\u7121\u969c\u7919\u65c5\u904a\u63a8\u85a6\u666f\u9ede",active:!1}]},j=function(e,a){var t=e.currentPage,n=(e.totalPage,e.categories,e.likedSpot);switch(a.type){case"ADD_LIKE":var c=a.payload;return Object(m.a)({},e,{likedSpot:[].concat(Object(u.a)(n),[c])});case"NEXT_PAGE":var r=t+1;return Object(m.a)({},e,{currentPage:r});case"REMOVE_LIKE":var i=a.payload.id,l=n.filter((function(e){return e.id!==i}));return Object(m.a)({},e,{likedSpot:l});default:return e}},N=function(){var e=Object(n.useReducer)(j,w),a=Object(s.a)(e,2),t=a[0],r=a[1],i=t.totalPage,l=t.currentPage,m=Object(n.useState)([]),d=Object(s.a)(m,2),p=d[0],E=d[1],f=Object(n.useState)(!1),g=Object(s.a)(f,2),b=g[0],N=g[1],O={state:t,dispatch:r,content:p,isLoading:b};return Object(n.useEffect)((function(){var e=!1;return l>i&&(N(!0),setTimeout((function(){!function(){var a,t,n;o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,o.a.awrap(fetch("https://www.travel.taipei/open-api/zh-tw/Attractions/All?page=".concat(l),{headers:{accept:"application/json"}}));case 2:return a=c.sent,c.next=5,o.a.awrap(a.json());case 5:t=c.sent,n=t.data,e||E([].concat(Object(u.a)(p),Object(u.a)(n)));case 8:case"end":return c.stop()}}))}()}),1500),setTimeout((function(){N(!1)}),2e3)),function(){e=!0}}),[l]),c.a.createElement(v,{value:O},c.a.createElement(h,null))};t(33),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[17,1,2]]]);
//# sourceMappingURL=main.aa12d092.chunk.js.map